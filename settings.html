<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>settings</title>
<link rel="icon" href="bcps.png?v=1">

<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
/* styles unchanged */
</style>
</head>
<body>

<a href="index.html">back</a>

<div class="card">
  <h2>panic settings</h2>

  <label>panic redirect url</label>
  <input id="panicUrl">

  <label>panic key</label>
  <select id="panicKey">
    <option value="Escape">esc</option>
    <option value="`">`</option>
    <option value="Tab">tab</option>
  </select>

  <label>
    <input type="checkbox" id="panicEnabled">
    enable panic key
  </label>

  <button onclick="saveSettings()">save</button>
  <button class="secondary" onclick="testPanic()">test</button>
</div>

<script>
const panicUrl = document.getElementById("panicUrl");
const panicKey = document.getElementById("panicKey");
const panicEnabled = document.getElementById("panicEnabled");

panicUrl.value = localStorage.panicUrl || "https://bcps.schoology.com/home";
panicKey.value = localStorage.panicKey || "Escape";
panicEnabled.checked = localStorage.panicEnabled !== "false";

function saveSettings(){
  localStorage.panicUrl = panicUrl.value;
  localStorage.panicKey = panicKey.value;
  localStorage.panicEnabled = panicEnabled.checked;
  alert("settings saved");
}

function testPanic(){
  let url = panicUrl.value;
  if (!url.startsWith("http")) url = "https://" + url;
  location.href = url;
}
</script>

</body>
</html>
